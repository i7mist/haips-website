---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import { organizers } from '../data/organizers.js'; // Import organizer data
import abstractsRaw from '../data/haips2025-abstracts.txt?raw';

type Author = {
    name: string;
    email?: string;
    affiliation?: string;
};

type Submission = {
    id: string;
    title: string;
    abstract: string;
    authors: Author[];
    type: 'Paper' | 'Poster' | 'Unknown';
};

function parseSubmissions(raw: string): Submission[] {
    const submissions: Submission[] = [];
    if (!raw) return submissions;

    const blocks = raw
        .split(/\n(?=Submission\s+#\d+:)/g)
        .map(b => b.trim())
        .filter(Boolean);

    for (const block of blocks) {
        const idMatch = block.match(/^Submission\s+#(\d+):/);
        const id = idMatch ? idMatch[1] : '';

        const lines = block.split(/\n/);
        let titleLines: string[] = [];
        for (let i = 0; i < lines.length; i++) {
            const line = lines[i];
            if (/^=+\s*$/.test(line)) {
                break;
            }
            if (i === 0) {
                titleLines.push(line.replace(/^Submission\s+#\d+:\s*/, '').trim());
            } else {
                titleLines.push(line.trim());
            }
        }
        const title = titleLines.join(' ').replace(/\s+/g, ' ').trim();

        let abstract = '';
        const abstractMatch = block.match(/\nAbstract\n[-]+\n([\s\S]*?)\n\nAuthors\n[-]+/);
        if (abstractMatch) {
            abstract = abstractMatch[1].trim().replace(/\n+/g, ' ');
        }

        const authors: Author[] = [];
        const authorsSectionMatch = block.match(/\nAuthors\n[-]+\n([\s\S]*?)\n\nSubmission Type/);
        if (authorsSectionMatch) {
            const authorLines = authorsSectionMatch[1]
                .split(/\n/)
                .map(l => l.trim())
                .filter(l => /^\d+\./.test(l));
            for (const authorLine of authorLines) {
                const nameEmailAff = authorLine.replace(/^\d+\.\s*/, '');
                const emailMatch = nameEmailAff.match(/<([^>]+)>/);
                const affiliationMatch = nameEmailAff.match(/\(([^)]+)\)/);
                const name = nameEmailAff
                    .replace(/<[^>]+>/, '')
                    .replace(/\([^)]*\)/, '')
                    .trim();
                authors.push({
                    name,
                    email: emailMatch ? emailMatch[1] : undefined,
                    affiliation: affiliationMatch ? affiliationMatch[1] : undefined,
                });
            }
        }

        let type: Submission['type'] = 'Unknown';
        const typeMatch = block.match(/\nSubmission Type\n[-]+\n([\s\S]*?)\n\nTopic/);
        if (typeMatch) {
            const typeLine = typeMatch[1].split(/\n/).map(s => s.trim()).find(Boolean) || '';
            if (/^Paper\b/i.test(typeLine)) type = 'Paper';
            else if (/^Poster\b/i.test(typeLine)) type = 'Poster';
        }

        if (title) {
            submissions.push({ id, title, abstract, authors, type });
        }
    }

    return submissions;
}

const acceptedSubmissions = parseSubmissions(abstractsRaw);
---

<Layout title="Home">
    
    <img src="/haips-banner.png" alt="HAIPS Workshop Banner" class="hero-image">

    <p>
    <strong>
    We are excited to announce the 1st workshop on Human-Centered AI Privacy and Security (HAIPS, pronounced "hypes"), co-located with <a href="https://www.sigsac.org/ccs/CCS2025/">ACM CCS 2025</a>!
    </strong>
    </p>

    <section id="keynote-speakers">
        <h2>Keynote Speakers</h2>
        <div class="keynote-speaker-container">
            <div class="keynote-speaker">
                <img src="https://www.cs.cmu.edu/~jasonh/img/portraits/portrait-2013b-big.jpg" alt="Jason Hong (CMU)" class="profile-pic keynote-profile-pic" />
                <p><strong><a href="https://www.cs.cmu.edu/~jasonh/" target="_blank" rel="noopener noreferrer">Jason Hong (CMU)</a></strong></p>
            </div>
            <div class="keynote-speaker">
                <img src="https://scholar.googleusercontent.com/citations?view_op=medium_photo&user=4_fN00YAAAAJ&citpid=4" alt="Patrick Gage Kelley (Google)" class="profile-pic keynote-profile-pic" />
                <p><strong><a href="https://pgk.io" target="_blank" rel="noopener noreferrer">Patrick Gage Kelley (Google)</a></strong></p>
            </div>
        </div>
    </section>

    <section id="accepted">
        <h2>Accepted Papers</h2>
        <blockquote>
            Official proceedings will be published in the ACM Digital Library in October.
        </blockquote>

        {acceptedSubmissions.length === 0 ? (
            <p>No accepted papers to display yet.</p>
        ) : (
            <ul class="accepted-list">
                {acceptedSubmissions.map((s) => (
                    <li class="accepted-item">
                        <div class="accepted-header">
                            <span class={`badge ${s.type === 'Paper' ? 'badge-paper' : s.type === 'Poster' ? 'badge-poster' : 'badge-unknown'}`}>{s.type}</span>
                            <h3 class="accepted-title">{s.title}</h3>
                        </div>
                        {s.authors.length > 0 && (
                            <p class="accepted-authors">
                                <strong>Authors:</strong>
                                {' '}
                                {s.authors.map(a => `${a.name}${a.affiliation ? ` (${a.affiliation})` : ''}`).join(', ')}
                            </p>
                        )}
                        {s.abstract && (
                            <details class="accepted-abstract">
                                <summary><strong>Abstract</strong></summary>
                                <p>{s.abstract}</p>
                            </details>
                        )}
                    </li>
                ))}
            </ul>
        )}
    </section>

    <section id="cfp">
        <h2>Call for Submissions</h2>
        <p>
            Recent advances in artificial intelligence (AI) and machine learning (ML) create and exacerbate new security, privacy, and safety risks, from inferring personal attributes, generating non-consensual intimate imagery, to voice cloning, to spear phishing. At the same time, AI can afford new opportunities to address long standing end-user security and privacy challenges. We welcome participants who work on topics related to AI/ML security and privacy from human-centered perspectives. Interested participants will be asked to contribute a paper to the workshop. 
        </p>

        <h3>Topics of Interest</h3>
        <p>Topics of interest include, but are not limited to:</p>
        <ul>
            <li>Human-centered evaluation of privacy, security, and safety vulnerabilities in emerging AI technologies</li>
            <li>Users' mental models, behaviors, and preferences about privacy, security, and safety in AI systems</li>
            <li>Usable security mechanisms and privacy-enhancing technologies in AI systems</li>
            <li>Novel applications of AI for human-centered privacy, security, and safety management, education, and design</li>
            <li>Security, privacy, safety, and human autonomy in agentic AI systems</li>
            <li>Security, privacy, and safety risks and mitigation related to AI practitioners</li>
            <li>Human-centered evaluation and analysis of laws and policies in reaction to emerging privacy, security, and safety threats caused by AI</li>
            <li>Societal impact of AI on privacy, security, safety and its tensions with other requirements (e.g., fairness)</li>
            <li>Position papers outlining a novel research agenda for human-centered privacy, security, and safety in the context of AI</li>
        </ul>

        We welcome submissions with the following three types of contributions:
        <ol>
            <li>Original papers on new techniques and empirical studies;</li>
            <li>Systematization-of-knowledge papers;</li>
            <li>Position papers.</li>
        </ol>


        <h3>Submission Types and Format</h3>
        We welcome two types of submissions: (1) Papers and (2) Posters. The first type is archival, meaning that accepted submissions will be published in the ACM Digital Library. The second type is non-archival and includes encore submissions featuring recently published research. The authors can specify the type in the submission form.
        <h4>Papers</h4>
            <p>
                At most 10 pages in the ACM double-column format (sigconf in the ACM template<a href="https://www.acm.org/publications/proceedings-template" target="_blank" rel="noopener noreferrer">*</a>), excluding references and appendices.
                Note that we also welcome shorter work-in-progress papers (similar to CHI Late-Breaking Work) that can benefit from early feedback opportunities while still retaining the potential to develop into full publications in the future.
            </p>
            <p><small>
                <strong>Note for LaTeX users:</strong> Please use <code>{'\\documentclass[sigconf,anonymous]{acmart}'}</code> for submission. For the camera ready version, please use <code>{'\\documentclass[sigconf]{acmart}'}</code>.
            </small></p>

            <p>Accepted papers will be published in the ACM Digital Library.</p>

        <h4>Posters</h4>
            <p>
                Poster submissions are intended for encore presentations of research published in 2023 or later. The submission should include a poster draft and a one-page single-column document with the following information: Full bibliographic reference (title, authors, date, venue, etc.) to the paper, Abstract of the original paper, and Link/DOI to the published paper
            </p>

        <h3>Review Process</h3>
        <p>Paper submissions will undergo a double-blind review process. Selections will be based on the quality of the submission and diversity of perspectives to foster meaningful knowledge exchange among a broad range of stakeholders.</p>
        <p>Poster submissions will undergo a single-blind review process. Selections will be based on the quality of the poster draft, relevance of the topic, and diversity of perspectives to foster meaningful knowledge exchange among a broad range of stakeholders.</p>

        <h4>Awards</h4>
        <p>Paper and poster awards will be established to recognize outstanding works.</>
    </section>

    <section id="organization">
        <h2>Organizing Committee</h2>
        <div class="committee-section">
            <h3>Workshop Chairs</h3>
            <ul class="organizer-list chairs-steering">
                {organizers.chairs.map(chair => (
                    <li>
                        {/* Use chair.profilePic if available, otherwise show placeholder */}
                        {chair.profilePic ? (
                            <img src={chair.profilePic} alt={`Profile photo of ${chair.name}`} class="profile-pic" />
                        ) : (
                            <div class="profile-pic-placeholder"></div>
                        )}
                        <div class="organizer-details">
                            {chair.website && chair.website !== '#' ? (
                                <a href={chair.website} target="_blank" rel="noopener noreferrer">
                                    <strong>{chair.name}</strong>
                                </a>
                            ) : (
                                <strong>{chair.name}</strong>
                            )}
                            ({chair.affiliation})
                        </div>
                    </li>
                ))}
            </ul>
        </div>

        <div class="committee-section">
            <h3>Steering Committee</h3>
            <ul class="organizer-list chairs-steering">
                {organizers.steeringCommittee.map(member => (
                    <li>
                        {/* Use member.profilePic if available, otherwise show placeholder */}
                        {member.profilePic ? (
                            <img src={member.profilePic} alt={`Profile photo of ${member.name}`} class="profile-pic" />
                        ) : (
                            <div class="profile-pic-placeholder"></div>
                        )}
                        <div class="organizer-details">
                            {member.website && member.website !== '#' ? (
                                <a href={member.website} target="_blank" rel="noopener noreferrer">
                                    <strong>{member.name}</strong>
                                </a>
                            ) : (
                                <strong>{member.name}</strong>
                            )}
                            ({member.affiliation})
                        </div>
                    </li>
                ))}
            </ul>
        </div>

        <div class="committee-section">
            <h3>Program Committee</h3>
            <p>Includes Workshop Chairs and:</p>
            <ul class="organizer-list chairs-steering">
                {organizers.programCommittee.map(member => (
                    <li>
                        {/* Use member.profilePic if available, otherwise show placeholder */}
                        {member.profilePic ? (
                            <img src={member.profilePic} alt={`Profile photo of ${member.name}`} class="profile-pic" />
                        ) : (
                            <div class="profile-pic-placeholder"></div>
                        )}
                        <div class="organizer-details">
                            {member.website && member.website !== '#' ? (
                                <a href={member.website} target="_blank" rel="noopener noreferrer">
                                    <strong>{member.name}</strong>
                                </a>
                            ) : (
                                <strong>{member.name}</strong>
                            )}
                            ({member.affiliation})
                        </div>
                    </li>
                ))}
            </ul>
            <p><em>More PC members to be confirmed.</em></p>
        </div>
    </section>

    <section id="submission">
        <h2>Paper Submission</h2>

        <p>
            Submission site is open! <a href="https://haips2025.hotcrp.com">https://haips2025.hotcrp.com/</a>
        </p>

        <p>
            Please refer to the <a href="/#cfp">Call for Submissions</a> section for information on topics and formatting.
        </p>

    </section>

    <section id="dates">
        <h2>Important Dates</h2>
        <ul class="styled-list">
            <li><strong>Submission Deadline:</strong> June 20, 2025</li>
            <li><strong>Notification of Acceptance:</strong> August 8, 2025 </li>
            <li><strong>Camera-Ready Deadline:</strong> August 22, 2025</li>
            <li><strong>Workshop Date:</strong> Oct 17, 2025</li>
        </ul>
    </section>


</Layout>

<style>
    .tagline {
        font-size: 1.2rem;
        color: var(--text-secondary);
        margin-top: -1em;
        margin-bottom: 2em;
    }
    .hero-image {
        width: 100%;
        /* max-height: 300px; */ /* Allow full height */
        object-fit: cover; 
        margin-bottom: 1rem; /* Reduced value */
        border-radius: 8px;
        background-color: var(--bg-secondary); /* Placeholder color */
    }
    section {
        margin-bottom: 3rem;
        padding-top: 1rem; /* Add padding to space below fixed header */
    }
    section h2 {
        margin-top: 0;
        border-bottom: 2px solid var(--accent-light);
        padding-bottom: 0.4rem;
        display: inline-block;
    }
    section h3 {
        margin-top: 2.5rem;
    }
    .styled-list {
        list-style: none;
        padding-left: 0;
    }
    .styled-list li {
        margin-bottom: 0.5rem;
        padding-left: 1.2em;
        position: relative;
    }
    .styled-list li::before {
        content: '\25AA'; /* Square bullet */
        color: var(--accent);
        position: absolute;
        left: 0;
        top: 1px;
        font-size: 0.8em;
    }

    /* Styles from organization.astro */
    .committee-section {
        margin-bottom: 2rem;
    }
    .organizer-list {
        list-style: none;
        padding-left: 0;
        margin-top: 1rem; 
    }

    .organizer-list.chairs-steering li {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
    }

    .profile-pic-placeholder,
    .profile-pic {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 1rem;
        flex-shrink: 0;
    }

    .profile-pic-placeholder {
        background-color: var(--accent-light); /* Placeholder color */
    }

    .profile-pic {
        object-fit: cover; /* Ensure image covers the circle nicely */
    }

    .organizer-details {
        flex-grow: 1;
    }

    .organizer-list strong {
        margin-bottom: 0;
        font-size: 1em;
        color: var(--text-primary);
    }

    .organizer-list a {
        font-size: 0.9em;
    }

    /* Adjustments for single page */
    h2 {
        margin-top: 2rem;
    }
    /* Specific style overrides if needed */
    #cfp ol,
    #cfp ul {
        margin-left: 1.5em;
    }
    #cfp ul {
        list-style: disc;
    }
    #cfp ol {
        list-style: decimal;
    }

    /* Keynote Speaker Styles */
    #keynote-speakers {
        text-align: center; /* Center the content of the section */
    }
    .keynote-speaker-container {
        display: flex;
        justify-content: center; /* Center the speakers horizontally */
        align-items: flex-start; /* Align items at the top */
        gap: 3rem; /* Space between speakers */
        margin-top: 1.5rem;
    }
    .keynote-speaker {
        display: flex;
        flex-direction: column;
        align-items: center;
        max-width: 150px; /* Max width for each speaker block */
    }
    .keynote-profile-pic {
        width: 140px; /* Specific size for keynote profile pics */
        height: 140px; /* Specific size for keynote profile pics */
        margin-bottom: 0.5rem; /* Space between pic and name */
    }
    .keynote-speaker p {
        margin-top: 0.5rem;
        font-size: 1em;
        text-align: center;
    }
    /* End Keynote Speaker Styles */

    /* Accepted Papers */
    #accepted .accepted-list {
        list-style: none;
        padding-left: 0;
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
        margin-top: 1rem;
    }
    #accepted .accepted-item {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 1rem;
    }
    #accepted .accepted-header {
        display: flex;
        align-items: flex-start;
        gap: 0.6rem;
    }
    #accepted .accepted-title {
        margin: 0;
        font-size: 1.2rem;
        color: var(--text-primary);
    }
    #accepted .accepted-authors {
        margin: 0.6rem 0 0.4rem 0;
        color: var(--text-secondary);
        font-size: 0.95rem;
    }
    #accepted .accepted-abstract {
        margin: 0.2rem 0 0 0;
        font-size: 0.98rem;
    }
    #accepted .accepted-abstract summary {
        cursor: pointer;
        color: var(--accent-dark);
        margin-bottom: 0.3rem;
    }
    #accepted .accepted-abstract[open] summary {
        margin-bottom: 0.4rem;
    }
    #accepted .accepted-abstract p {
        margin: 0.2rem 0 0 0;
    }
    .badge {
        display: inline-block;
        padding: 0.15rem 0.5rem;
        border-radius: 999px;
        font-size: 0.75rem;
        font-weight: 600;
        border: 1px solid var(--border-color);
        background: var(--accent-light);
        color: var(--accent-dark);
        white-space: nowrap;
        margin-top: 0.1rem;
    }
    .badge-paper {
        background: #e8f4ff;
        color: #0b61a4;
        border-color: #cfe6fb;
    }
    .badge-poster {
        background: #eef9f0;
        color: #1e7e34;
        border-color: #d3efd8;
    }
    .badge-unknown {
        background: var(--accent-light);
        color: var(--text-secondary);
    }

</style>
